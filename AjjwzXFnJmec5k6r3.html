<html><head><base href="." />
<style>
  body {
    background-color: #ffe6f2;
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  .title-container {
    text-align: center;
    margin-bottom: 20px;
    position: relative;
    display: inline-block;
  }

  .game-title {
    font-size: 48px;
    color: #ff1a75;
    text-shadow: 3px 3px 0px #ff99cc,
                 6px 6px 0px #ff66b2;
    font-family: 'Arial Black', sans-serif;
    letter-spacing: 3px;
    margin: 0;
    padding: 10px;
    position: relative;
    animation: bounce 2s infinite;
  }

  @keyframes bounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
  }

  .title-bow {
    position: absolute;
    top: -15px;
    right: -25px;
    width: 40px;
    height: 40px;
    fill: #ff1a75;
    transform: rotate(15deg);
  }

  #game-container {
    background-color: #fff;
    border: 10px solid #ff99cc;
    border-radius: 15px;
    padding: 20px;
    box-shadow: 0 0 20px rgba(255, 153, 204, 0.5);
  }

  #game-board {
    border: 5px solid #ff66b2;
    background-color: #ffcceb;
  }

  .score-container {
    display: flex;
    justify-content: space-around;
    width: 100%;
    margin: 20px 0;
    font-size: 24px;
    color: #ff1a75;
  }

  .score-box {
    background-color: #ffcceb;
    border: 3px solid #ff66b2;
    border-radius: 10px;
    padding: 10px 20px;
    text-align: center;
  }

  .score-label {
    font-size: 18px;
    margin-bottom: 5px;
  }

  .score-value {
    font-weight: bold;
    font-size: 28px;
  }

  .controls {
    margin-top: 20px;
    text-align: center;
    color: #ff1a75;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 15px;
  }

  .control-buttons {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
    justify-content: center;
  }

  .control-btn {
    background-color: #ff99cc;
    border: 3px solid #ff66b2;
    border-radius: 10px;
    padding: 10px 20px;
    color: white;
    font-size: 18px;
    cursor: pointer;
    transition: all 0.2s ease;
    min-width: 100px;
  }

  .control-btn:hover {
    background-color: #ff66b2;
    transform: scale(1.05);
  }

  .control-btn:active {
    transform: scale(0.95);
  }

  .bow {
    position: absolute;
    top: -20px;
    right: -20px;
    width: 50px;
    height: 50px;
    fill: #ff66b2;
  }

  .hello-kitty-container {
    position: absolute;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: -1;
  }

  .hello-kitty {
    position: absolute;
    width: 100px;
    height: 100px;
    fill: #ff99cc;
  }

  .hello-kitty-left {
    left: 50px;
    top: 50%;
    transform: translateY(-50%);
    animation: bounce-left 3s infinite ease-in-out;
  }

  .hello-kitty-right {
    right: 50px;
    top: 50%;
    transform: translateY(-50%) scaleX(-1);
    animation: bounce-right 3s infinite ease-in-out;
  }

  @keyframes bounce-left {
    0%, 100% { transform: translateY(-50%) rotate(-5deg); }
    50% { transform: translateY(-60%) rotate(5deg); }
  }

  @keyframes bounce-right {
    0%, 100% { transform: translateY(-50%) scaleX(-1) rotate(5deg); }
    50% { transform: translateY(-60%) scaleX(-1) rotate(-5deg); }
  }

  .preview-container {
    border: 5px solid #ff66b2;
    background-color: #ffcceb;
    width: 120px;
    height: 120px;
    margin: 10px auto;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
  }

  .preview-label {
    color: #ff1a75;
    text-align: center;
    font-size: 18px;
    margin-bottom: 5px;
  }

  #preview-canvas {
    background-color: #ffcceb;
  }
</style>
</head>
<body>
<div class="title-container">
  <h1 class="game-title">Hello Tetris</h1>
  <svg class="title-bow" viewBox="0 0 100 100">
    <path d="M50 20 C60 20, 70 30, 70 40 C70 50, 60 60, 50 60 C40 60, 30 50, 30 40 C30 30, 40 20, 50 20 Z" />
    <circle cx="50" cy="40" r="5" fill="#ff99cc"/>
  </svg>
</div>
<div class="hello-kitty-container">
  <svg class="hello-kitty hello-kitty-left" viewBox="0 0 100 100">
    <circle cx="50" cy="50" r="40" fill="#ffffff" stroke="#ff66b2" stroke-width="2"/>
    <circle cx="35" cy="45" r="4" fill="#000000"/>
    <circle cx="65" cy="45" r="4" fill="#000000"/>
    <circle cx="50" cy="55" r="3" fill="#ff1a75"/>
    <path d="M20 30 Q30 15 40 30" stroke="#ff66b2" stroke-width="2" fill="none"/>
    <path d="M60 30 Q70 15 80 30" stroke="#ff66b2" stroke-width="2" fill="none"/>
  </svg>
  <svg class="hello-kitty hello-kitty-right" viewBox="0 0 100 100">
    <circle cx="50" cy="50" r="40" fill="#ffffff" stroke="#ff66b2" stroke-width="2"/>
    <circle cx="35" cy="45" r="4" fill="#000000"/>
    <circle cx="65" cy="45" r="4" fill="#000000"/>
    <circle cx="50" cy="55" r="3" fill="#ff1a75"/>
    <path d="M20 30 Q30 15 40 30" stroke="#ff66b2" stroke-width="2" fill="none"/>
    <path d="M60 30 Q70 15 80 30" stroke="#ff66b2" stroke-width="2" fill="none"/>
  </svg>
</div>
<div id="game-container">
  <svg class="bow" viewBox="0 0 100 100">
    <path d="M50 20 C60 20, 70 30, 70 40 C70 50, 60 60, 50 60 C40 60, 30 50, 30 40 C30 30, 40 20, 50 20 Z" />
    <circle cx="50" cy="40" r="5" fill="#ff1a75"/>
  </svg>
  <div class="score-container">
    <div class="score-box">
      <div class="score-label">Current Score</div>
      <div class="score-value" id="score">0</div>
    </div>
    <div class="score-box">
      <div class="score-label">High Score</div>
      <div class="score-value" id="high-score">0</div>
    </div>
    <div class="score-box">
      <div class="score-label">Lines</div>
      <div class="score-value" id="lines">0</div>
    </div>
  </div>
  <div class="preview-container">
    <div class="preview-label">Next Piece</div>
    <canvas id="preview-canvas" width="90" height="90"></canvas>
  </div>
  <canvas id="game-board" width="300" height="600"></canvas>
  <div class="controls">
    <p>← → to move | ↑ to rotate | ↓ to drop faster</p>
    <div class="control-buttons">
      <button class="control-btn" id="pause-btn">Pause</button>
      <button class="control-btn" id="reset-btn">New Game</button>
      <button class="control-btn" id="left-btn">←</button>
      <button class="control-btn" id="right-btn">→</button>
      <button class="control-btn" id="rotate-btn">Rotate</button>
      <button class="control-btn" id="down-btn">↓</button>
    </div>
  </div>
</div>

<script>
const canvas = document.getElementById('game-board');
const ctx = canvas.getContext('2d');
const previewCanvas = document.getElementById('preview-canvas');
const previewCtx = previewCanvas.getContext('2d');
const BLOCK_SIZE = 30;
const BOARD_WIDTH = 10;
const BOARD_HEIGHT = 20;
let score = 0;
let highScore = 0;
let totalLines = 0;
let nextPiece = null;

// Hello Kitty themed colors
const COLORS = [
  '#ff99cc', // Pink
  '#ff66b2', // Darker Pink
  '#ffcceb', // Light Pink
  '#ff1a75', // Deep Pink
  '#ff80bf', // Medium Pink
];

// Tetromino shapes with Hello Kitty theme
const SHAPES = [
  [[1, 1, 1, 1]], // I
  [[1, 1], [1, 1]], // O
  [[1, 1, 1], [0, 1, 0]], // T
  [[1, 1, 1], [1, 0, 0]], // L
  [[1, 1, 1], [0, 0, 1]], // J
  [[1, 1, 0], [0, 1, 1]], // S
  [[0, 1, 1], [1, 1, 0]], // Z
];

let board = Array(BOARD_HEIGHT).fill().map(() => Array(BOARD_WIDTH).fill(0));
let currentPiece = null;
let currentPosition = {x: 0, y: 0};
let isPaused = false;
const pauseBtn = document.getElementById('pause-btn');
const resetBtn = document.getElementById('reset-btn');

class Piece {
  constructor(shape, color) {
    this.shape = shape;
    this.color = color;
  }
}

function createNewPiece() {
  if (!nextPiece) {
    const shapeIndex = Math.floor(Math.random() * SHAPES.length);
    const colorIndex = Math.floor(Math.random() * COLORS.length);
    nextPiece = new Piece(SHAPES[shapeIndex], COLORS[colorIndex]);
  }
  
  const piece = nextPiece;
  const shapeIndex = Math.floor(Math.random() * SHAPES.length);
  const colorIndex = Math.floor(Math.random() * COLORS.length);
  nextPiece = new Piece(SHAPES[shapeIndex], COLORS[colorIndex]);
  
  drawPreview();
  return piece;
}

function drawPreview() {
  previewCtx.fillStyle = '#ffcceb';
  previewCtx.fillRect(0, 0, previewCanvas.width, previewCanvas.height);
  
  if (!nextPiece) return;
  
  const blockSize = 20;
  const offsetX = (previewCanvas.width - nextPiece.shape[0].length * blockSize) / 2;
  const offsetY = (previewCanvas.height - nextPiece.shape.length * blockSize) / 2;
  
  for (let y = 0; y < nextPiece.shape.length; y++) {
    for (let x = 0; x < nextPiece.shape[y].length; x++) {
      if (nextPiece.shape[y][x]) {
        previewCtx.fillStyle = nextPiece.color;
        previewCtx.fillRect(offsetX + x * blockSize, offsetY + y * blockSize, blockSize, blockSize);
        previewCtx.strokeStyle = '#ffffff';
        previewCtx.strokeRect(offsetX + x * blockSize, offsetY + y * blockSize, blockSize, blockSize);
      }
    }
  }
}

function drawBoard() {
  ctx.fillStyle = '#ffcceb';
  ctx.fillRect(0, 0, canvas.width, canvas.height);
  
  for (let y = 0; y < BOARD_HEIGHT; y++) {
    for (let x = 0; x < BOARD_WIDTH; x++) {
      if (board[y][x]) {
        drawBlock(x, y, board[y][x]);
      }
    }
  }
}

function drawPiece() {
  if (!currentPiece) return;
  
  for (let y = 0; y < currentPiece.shape.length; y++) {
    for (let x = 0; x < currentPiece.shape[y].length; x++) {
      if (currentPiece.shape[y][x]) {
        drawBlock(currentPosition.x + x, currentPosition.y + y, currentPiece.color);
      }
    }
  }
}

function drawBlock(x, y, color) {
  ctx.fillStyle = color;
  ctx.fillRect(x * BLOCK_SIZE, y * BLOCK_SIZE, BLOCK_SIZE, BLOCK_SIZE);
  ctx.strokeStyle = '#ffffff';
  ctx.strokeRect(x * BLOCK_SIZE, y * BLOCK_SIZE, BLOCK_SIZE, BLOCK_SIZE);
}

function canMove(offsetX, offsetY, shape = currentPiece.shape) {
  for (let y = 0; y < shape.length; y++) {
    for (let x = 0; x < shape[y].length; x++) {
      if (shape[y][x]) {
        const newX = currentPosition.x + x + offsetX;
        const newY = currentPosition.y + y + offsetY;
        
        if (newX < 0 || newX >= BOARD_WIDTH || newY >= BOARD_HEIGHT) return false;
        if (newY >= 0 && board[newY][newX]) return false;
      }
    }
  }
  return true;
}

function rotate() {
  const newShape = currentPiece.shape[0].map((_, i) =>
    currentPiece.shape.map(row => row[i]).reverse()
  );
  
  if (canMove(0, 0, newShape)) {
    currentPiece.shape = newShape;
  }
}

function mergePiece() {
  for (let y = 0; y < currentPiece.shape.length; y++) {
    for (let x = 0; x < currentPiece.shape[y].length; x++) {
      if (currentPiece.shape[y][x]) {
        board[currentPosition.y + y][currentPosition.x + x] = currentPiece.color;
      }
    }
  }
}

function checkLines() {
  let linesCleared = 0;
  
  for (let y = BOARD_HEIGHT - 1; y >= 0; y--) {
    if (board[y].every(cell => cell !== 0)) {
      board.splice(y, 1);
      board.unshift(Array(BOARD_WIDTH).fill(0));
      linesCleared++;
      y++;
    }
  }
  
  if (linesCleared > 0) {
    score += linesCleared * 100;
    totalLines += linesCleared;
    if (score > highScore) {
      highScore = score;
      document.getElementById('high-score').textContent = highScore;
    }
    document.getElementById('score').textContent = score;
    document.getElementById('lines').textContent = totalLines;
  }
}

function gameOver() {
  alert(`Game Over! Score: ${score}`);
  board = Array(BOARD_HEIGHT).fill().map(() => Array(BOARD_WIDTH).fill(0));
  score = 0;
  totalLines = 0;
  document.getElementById('score').textContent = score;
  document.getElementById('lines').textContent = totalLines;
}

function update() {
  if (isPaused) return;
  
  if (!currentPiece) {
    currentPiece = createNewPiece();
    currentPosition = {x: Math.floor(BOARD_WIDTH / 2) - 1, y: 0};
    
    if (!canMove(0, 0)) {
      gameOver();
      return;
    }
  }
  
  if (canMove(0, 1)) {
    currentPosition.y++;
  } else {
    mergePiece();
    checkLines();
    currentPiece = null;
  }
  
  drawBoard();
  drawPiece();
}

pauseBtn.addEventListener('click', () => {
  isPaused = !isPaused;
  pauseBtn.textContent = isPaused ? 'Resume' : 'Pause';
});

resetBtn.addEventListener('click', () => {
  board = Array(BOARD_HEIGHT).fill().map(() => Array(BOARD_WIDTH).fill(0));
  score = 0;
  totalLines = 0;
  currentPiece = null;
  nextPiece = null;
  isPaused = false;
  pauseBtn.textContent = 'Pause';
  document.getElementById('score').textContent = score;
  document.getElementById('lines').textContent = totalLines;
  drawPreview();
  drawBoard();
});

document.getElementById('left-btn').addEventListener('click', () => {
  if (!currentPiece || isPaused) return;
  if (canMove(-1, 0)) {
    currentPosition.x--;
    drawBoard();
    drawPiece();
  }
});

document.getElementById('right-btn').addEventListener('click', () => {
  if (!currentPiece || isPaused) return;
  if (canMove(1, 0)) {
    currentPosition.x++;
    drawBoard();
    drawPiece();
  }
});

document.getElementById('rotate-btn').addEventListener('click', () => {
  if (!currentPiece || isPaused) return;
  rotate();
  drawBoard();
  drawPiece();
});

document.getElementById('down-btn').addEventListener('click', () => {
  if (!currentPiece || isPaused) return;
  if (canMove(0, 1)) {
    currentPosition.y++;
    drawBoard();
    drawPiece();
  }
});

document.addEventListener('keydown', (e) => {
  if (!currentPiece || isPaused) return;
  
  switch (e.keyCode) {
    case 37: // Left
      if (canMove(-1, 0)) currentPosition.x--;
      break;
    case 39: // Right
      if (canMove(1, 0)) currentPosition.x++;
      break;
    case 40: // Down
      if (canMove(0, 1)) currentPosition.y++;
      break;
    case 38: // Up (rotate)
      rotate();
      break;
  }
  
  drawBoard();
  drawPiece();
});

setInterval(update, 1000);
drawBoard();
</script>
</body></html>